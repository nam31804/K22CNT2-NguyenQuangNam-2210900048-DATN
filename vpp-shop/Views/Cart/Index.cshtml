@model vpp_shop.Models.Cart

<link rel="stylesheet" href="~/css/web/cart.css" />

<h2 class="cart-title">Giỏ hàng của bạn</h2>

@if (!Model.CartItems.Any())
{
    <p class="text-center">Giỏ hàng trống</p>
}
else
{
    <table class="cart-table">
        <thead>
            <tr>
                <th></th>
                <th>Sản phẩm</th>
                <th>Đơn giá</th>
                <th>Số lượng</th>
                <th>Thành tiền</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.CartItems)
            {
                <tr id="row-@item.Id">
                    <td class="text-center">
                        <input type="checkbox"
                               class="item-check"
                               data-id="@item.Id"
                               data-price="@item.Product.Price"
                               onchange="updateGrandTotal()" />
                    </td>

                    <td>
                        <div class="cart-product">
                            <img src="~/images/products/@item.Product.Image" alt="">
                            <div>@item.Product.Name</div>
                        </div>
                    </td>

                    <td class="cart-price">
                        @item.Product.Price.ToString("N0") đ
                    </td>

                    <td>
                        <div class="cart-qty">
                            <button type="button" onclick="decrease(@item.Id)">-</button>
                            <span id="qty-@item.Id">@item.Quantity</span>
                            <button type="button" onclick="increase(@item.Id)">+</button>
                        </div>
                    </td>

                    <td class="cart-total">
                        <span id="total-@item.Id">
                            @((item.Product.Price * item.Quantity).ToString("N0"))
                        </span> đ
                    </td>

                    <td class="cart-remove">
                        <button type="button" onclick="removeItem(@item.Id)">🗑</button>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <div class="cart-summary">
        <table>
            <tr>
                <td class="label">Tạm tính</td>
                <td class="total">
                    <span id="grand-total">0</span> đ
                </td>
            </tr>
        </table>

        <button class="checkout-btn" onclick="checkout()">
            TIẾN HÀNH THANH TOÁN
        </button>
    </div>
}

<script src="~/js/cart.js"></script>
